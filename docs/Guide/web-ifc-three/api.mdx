---
title: API
sidebar_position: 3
---

import {IfcCard} from "../../../src/components/Card/InfoCard";

##  The list of awesome things you can do with web-ifc-three

  ðŸ“ƒ
All APIs are documented, so when you use any of the objects or methods seen in this documentation, you should see help in Intellisense, regardless of the IDE you are using. [Check it out!](https://github.com/IFCjs/web-ifc-three/blob/main/src/IFC/Components/IFCManager.ts)

  ðŸ‘©â€ðŸ«
However, we realise that reading intellisense or comments is not the most comfortable thing to do, so on this page we will make an overview of what the API can do. Everything will be covered in more detail in specific tutorials later on.

##  IfcLoader

The only object we will import from the library. It contains all the logic needed to work with IFC.

You can use its `load()` and `loadAsync()` methods to load IFCs from a URL, [just like any other Three.js Loader](https://threejs.org/docs/#api/en/loaders/Loader.load). For example, to load an IFC we can do the following:

```js
import { IFCLoader } from "web-ifc-three/IFCLoader";

const ifcLoader = new IFCLoader();
ifcLoader.load(
    "models/Example_model.ifc",
    (ifcModel) => scene.add(ifcModel.mesh));
```

With `web-ifc-three` you can load multiple models in the scene. Many of the API operations are executed on a specified model. To express on which model we want to operate we have to give its ModelID.

You can get the ID of a model in the property `modelID` of the generated meshes. We add this property to Three.js default [mesh](https://threejs.org/docs/#api/en/objects/Mesh). This is also expressed in the typing of IFC.js API, so you should be able to see this in intellisense.

```js
const modelID = ifcModel.mesh.modelID;
```

In addition, `IfcLoader` has a property `IfcManager`, which contains all the methods to work with the IFCs we load into the scene.

##  IfcManager

This object contains all the web-ifc-three API methods. It manages multiple loaded IFCs efficiently and allows access to their properties, change their appearance, etc.

###  setWasmPath

```js
  IfcLoader.IfcManager.setWasmPath(
                        path: string
                        ): void
```

Specifies the location of the web-ifc.wasm file. This file is the web-ifc file and is required to create any application with IFC.js. You can find it in node_modules/web-ifc/web-ifc.wasm.

Be careful, because if you use frameworks or libraries like React, Angular, Vue or Svelte it is possible that the root path of the project doesn't correspond to the root path of the served application. You will have to check in each case how the paths of the statically served files are managed. If you have doubts, you can take a look at the [examples](https://github.com/IFCjs/examples) we have in several frameworks.

#### Arguments:

- `path` is the route of `web-ifc.wasm`.

#### Example:

If `web-ifc.wasm` is in dist/wasmDir:

```js
  ifcLoader.setWasmPath("dist/wasmDir/");
```

###  setupThreeMeshBVH

```js
  ifcLoader.IfcManager.setupThreeMeshBVH(
                        computeBoundsTree: any,
                        disposeBoundsTree: any,
                        acceleratedRaycast: any
                        ): void;
```

This method allows object picking to be much faster, especially for very large models with heavy geometry. This method actually allows IFC.js to use the Garrett Johnson's amazing [library ](https://github.com/gkjohnson/three-mesh-bvh).

<IfcCard>
It sounds complicated, but don't worry: just give us the objects and we'll take care of the integration.
</IfcCard>

It's not mandatory, but if you want to be able to select objects in medium and large IFC models at 60 fps, you're going to have to use it. You can install it with `npm i three-mesh-bvh` or `yarn add three-mesh-bvh`.

#### Arguments:

- `computeBoundsTree` is a pre-made BufferGeometry extension function that builds a new BVH, assigns it to boundsTree, and applies the new index buffer to the geometry. - [source](https://github.com/gkjohnson/three-mesh-bvh#computeboundstree).

- `disposeBoundsTree` is a `BufferGeometry` extension function that disposes of the BVH. - [source](https://github.com/gkjohnson/three-mesh-bvh#disposeboundstree).

- `acceleratedRaycast`  An accelerated raycast function with the same signature as THREE.Mesh.raycast. Uses the BVH for raycasting if it's available otherwise it falls back to the built-in approach. - [source](https://github.com/gkjohnson/three-mesh-bvh#acceleratedraycast).

#### Example:

```js
import {
    IFCLoader
} from 'web-ifc-three/dist/IFCLoader';

import {
    acceleratedRaycast,
    computeBoundsTree,
    disposeBoundsTree
} from 'three-mesh-bvh';

const ifcLoader = new IFCLoader();
ifcLoader.ifcManager.setupThreeMeshBVH(
    acceleratedRaycast,
    computeBoundsTree,
    disposeBoundsTree);
```

###  getExpressId

```js
  IfcLoader.IfcManager.getExpressId(
                        geometry: BufferGeometry,
                        faceIndex: number
                        ): number;
```

Get the Express ID of an IFC element from a face index.

Why a face index? Because when we select an object in 3d space with the mouse, we get the index of that face, and we usually want to find out the ID of the object we have selected to highlight it, isolate it or get all its properties.

#### Arguments:

- `geometry` is the [geometry](https://threejs.org/docs/#api/en/core/BufferGeometry) of the model you clicked on with the mouse.

- `faceIndex` is the index of the face intersected with the [raycaster](https://threejs.org/docs/#api/en/core/Raycaster). If you are not familiar with the raycaster, don't worry; we'll cover this in detail in the tutorial about picking.

#### Example:

```js
  const intersected = raycaster.intersectObject(mesh)[0];
  const index = intersected.faceIndex;
  const id = ifcLoader.ifcManager.getExpressId(mesh, index);
```

###  getAllItemsOfType

```js
  IfcLoader.IfcManager.getAllItemsOfType(
                            modelID: number,
                            type: number,
                            verbose: boolean
                            ): number[] | object[]
```

Returns all objects of the specified IFC type (e.g. all walls, all floors, all windows, etc.) of a specific model.

It can return an array of `expressIDs`, or (if `verbose = true`) an array of objects containing the properties of the items found.

#### Arguments:

- `modelID` is ID of the IFC model.

- `type` is the IFC type you want to get. You can import these types directly from `web-ifc` (see example below).

- `verbose` if true, gets the properties of all the items found. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  import { IFCWALLSTANDARDCASE as W } from 'web-ifc';

  const manager = loader.ifcLoader.ifcManager;
  const walls = manager.getAllItemsOfType(0, W, false);
```

###  getItemProperties

```js
  IfcLoader.IfcManager.getItemProperties(
                            modelID: number,
                            id: number,
                            recursive = false
                            ): object;
```

Gets the native properties of the given element. In the IFC schema there are two types of properties: direct and indirect. How to obtain the indirect properties (psets, qsets and type properties) will be discussed later.

Returns an object where the keys are the name of the properties and the values are their values.

#### Arguments:

- `modelID` is ID of the IFC model.

- `id` is the Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

- `recursive` if true, gets the properties of all the referenced elements recursively. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const walls = manager.getItemProperties(model, id, false);
```

###  getPropertySets

```js
  IfcLoader.IfcManager.getPropertySets(
                            modelID: number,
                            type: number,
                            verbose: boolean
                            ): number[] | object[]
```

Returns all objects of the specified IFC type (e.g. all walls, all floors, all windows, etc.) of a specific model.

It can return an array of `expressIDs`, or (if `verbose = true`) an array of objects containing the properties of the items found.

#### Arguments:

- `modelID` is ID of the IFC model.

- `type` is the IFC type you want to get. You can import these types directly from `web-ifc` (see example below).

- `verbose` if true, gets the properties of all the items found. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  import { IFCWALLSTANDARDCASE as W } from 'web-ifc';

  const manager = loader.ifcLoader.ifcManager;
  const walls = manager.getAllItemsOfType(0, W, false);
```

###  getTypeProperties

```js
  IfcLoader.IfcManager.getTypeProperties(
                            modelID: number,
                            type: number,
                            verbose: boolean
                            ): number[] | object[]
```

Returns all objects of the specified IFC type (e.g. all walls, all floors, all windows, etc.) of a specific model.

It can return an array of `expressIDs`, or (if `verbose = true`) an array of objects containing the properties of the items found.

#### Arguments:

- `modelID` is ID of the IFC model.

- `type` is the IFC type you want to get. You can import these types directly from `web-ifc` (see example below).

- `verbose` if true, gets the properties of all the items found. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  import { IFCWALLSTANDARDCASE as W } from 'web-ifc';

  const manager = loader.ifcLoader.ifcManager;
  const walls = manager.getAllItemsOfType(0, W, false);
```

##  IfcModel
